{% extends "base.html" %}

{% block content %}
<div class="page-header">
<h1>Your work</h1>
</div>
{% if contracts %}
{% include "errorhandle.html" %}
{% for c in contracts %}
<div class="panel panel-default">
  <!-- Default panel contents -->
  <div class="panel-heading">Work hours for '<b>{{c.department}}</b>'</div>

  <form method="POST" action="/">
  {% csrf_token %}
  <table class="table">
    <tr>
      <th>Activity (keyword, project)</th><th>Date</th><th>Start</th><th>End</th><th>Pause</th><th>Worktime</th><th></th>

    </tr>
    {% for w in c.current_worklog.worktime_set.all  %}
    <tr>
      <td>{{w.activity}}</td><td>{{w.date|date:"d.m.y"}}</td><td>{{w.begin|time:"H:i"}}</td><td>{{w.end|time:"H:i"}}</td><td>{{w.pause}}</td><td>{{w.hours}}</td>
      <td></td>
    </tr>
    {% endfor %}
    <tr>
      <td><input class="form-control" type="text" name="activity"/></td>
      <td><input class="form-control datepicker" type="text" name="date"></td>
      <td><input class="form-control timepicker" type="text" name="start"></td>
      <td><input class="form-control timepicker" type="text" name="end"></td>
      <td><input class="form-control" type="text" name="pause"/></td>
      <td></td>
      <td><input class="btn btn-primary" value="OK" type="submit"/></td>
    </tr>
    <tr>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td><strong>&Sigma; {{c.cSum}}</strong></td>
      <td><a href="contract/{{c.id}}/{{month}}/{{year}}/print" class="btn btn-success"><span class="glyphicon glyphicon-print" aria-hidden="true"></span> Print</a></td>
    </tr>
  </table>
  <input type="hidden" name="contract-id" value="{{c.id}}"/>
</form>
</div>
{% endfor %}
{% else %}
<div class="alert alert-info" role="alert"><h2>Nothing here <span class="glyphicon glyphicon-lamp" aria-hidden="true"></span></h2><a href="/profile/contract/add/">Add a contract</a> in your <a href="/profile/">profile</a> to get stared.</div>
{% endif %}
{% endblock %}
